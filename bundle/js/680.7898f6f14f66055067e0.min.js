"use strict";(self.webpackChunk_=self.webpackChunk_||[]).push([[680],{5680:function(e,t,n){n.r(t),n.d(t,{default:function(){return y}});var r=n(8152),a=n(9515),o=n(4570),s=n(1214),i=n(7294),u=n(9477),l={unset:0},c={steps:l.unset},d=(0,i.createContext)(c),f={camera:{fov:10,far:200},sky:{enabled:!1,turbidity:0,rayleigh:.079,mieCoefficient:.023,mieDirectionalG:.226,inclination:70,azimuth:-102.7},controls:{distance:{min:30,max:200},polar:{min:5,max:60},azimuth:{min:-1/0,max:1/0},offsetAzimuth:0,enabled:!0,panEasing:100},light:{ambient:{color:5409234,intensity:3},spot:{color:16777215,intensity:1,far:50,position:{x:0,y:10,z:10}},shadowMapSize:512},renderer:{alpha:!1,shadowType:0,exposure:1,preserveDrawingBuffer:!0},physics:!1,stats:!0},b=n.p+"bundle/glb/Combine_v3.glb",m=n.p+"bundle/glb/Mushroom_pack.glb",p=n.p+"bundle/glb/bamboo_pack.glb",h=n(3777),g=n(3032),v=n(5893),y=(0,i.memo)((function(){var e=(0,i.useContext)(h._y),t=(0,r.Z)(e,2)[1],n=(0,i.useRef)(),c=(0,i.useRef)(0),y=(0,i.useRef)(),x=(0,i.useState)(l),w=(0,i.useState)(c.current),k=(0,r.Z)(w,2),C=k[0],j=k[1],E=(0,i.useState)([]),S=(0,r.Z)(E,2),_=S[0],N=S[1],Z=(0,i.useState)(0),z=(0,r.Z)(Z,2),D=z[0],L=z[1];return(0,i.useEffect)((function(){c.current=C}),[C]),(0,i.useEffect)((function(){0!==_.length&&2===D&&(a.default.add((function(){var e=n.current.clock.getDelta();_[c.current].update(e),n.current.stats.end()})),t({type:g.om.LoadingProcess,state:{enabled:!1}}))}),[_,D]),(0,i.useEffect)((function(){t({type:g.om.LoadingProcess,state:{enabled:!0}});var e=new s.Z(f);y.current.appendChild(e.render.domElement),n.current=e,e.render.setClearColor(0,0);var r=new u.Wid;r.metalness=0,r.roughness=.4;var a=new u.DvJ(100,.1,100),i=new u.Kj0(a,r);i.receiveShadow=!0,i.position.y=-1.23;var l=[b,m,p];Promise.all(l.map((function(e){return(0,o.Z)(e)}))).then((function(t){t.forEach((function(t,n){var r=t.model,a=t.mixers,o=t.gltf;r.scale.set(1,1,1),0===n&&e.scene.add(r),r.position.y=-1.2,r.position.x=[0,-1.2,1][n],o.scene.traverse((function(e){var t=e;t.isMesh&&(t.castShadow=!0)})),a.length>0&&N(a),L(n)}))}))}),[]),(0,v.jsxs)(d.Provider,{value:x,children:[(0,v.jsx)("div",{ref:y,className:"Landing"}),(0,v.jsxs)("div",{className:"absolute right-0 top-0 flex w-40 flex-col justify-center bg-black",children:[(0,v.jsx)("button",{className:"w-full border hover:bg-gray-700",type:"button",onClick:function(){return j(0)},children:"掉落"}),(0,v.jsx)("button",{className:"w-full border hover:bg-gray-700",type:"button",onClick:function(){return j(1)},children:"跑步"}),(0,v.jsx)("button",{className:"w-full border hover:bg-gray-700",type:"button",onClick:function(){return j(2)},children:"揮手"}),(0,v.jsx)("button",{className:"w-full border hover:bg-gray-700",type:"button",onClick:function(){var e=n.current.render.domElement.toDataURL("image/png",1),t=document.createElement("a");t.download="demo.png",t.href=e,t.target="_blank",t.click()},children:"截圖"})]})]})}))}}]);